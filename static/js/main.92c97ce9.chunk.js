(this["webpackJsonpthe-volatility-surface"]=this["webpackJsonpthe-volatility-surface"]||[]).push([[0],{176:function(t,e){},178:function(t,e,n){"use strict";n.r(e);var a=n(5),r=n.n(a),i=n(84),s=n.n(i),c=n(2),o=n(6),u=n(182),h=n(181),l=n(14),f=function(t){var e=t.columns.slice(1),n=t.columns[0];return{columns:e.map((function(t){return+t})),values:t.map((function(t){return e.map((function(e){return+t[e]}))})),index:t.map((function(t){return+t[n]}))}},p=function(t){var e=Object(l.a)().domain(Object(h.a)(t.columns)).range([-1,1]),n=Object(l.a)().domain(Object(h.a)(t.values.flat())).range([1,-1]).nice(),a=Object(l.a)().domain(Object(h.a)(t.index)).range([-1,1]);return{columns:t.columns.map((function(t){return e(t)})),values:t.values.map((function(t){return t.map((function(t){return n(t)}))})),index:t.index.map((function(t){return a(t)})),domain:n.domain(),labels:t}},b=function(t,e,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=a?n-1:n,i=(e-t)/r;return Array.from({length:n},(function(e,n){return t+i*n}))},j=function(t,e){return t.centroid.y<e.centroid.y?1:t.centroid.y>e.centroid.y?-1:0},d=n(22),O=n(23),m=n(15),y=function(){function t(e){Object(d.a)(this,t),this.coordinates=e,this.x=e[0],this.y=e[1],this.z=e[2],this.w=1}return Object(O.a)(t,[{key:"_rotateX",value:function(t){var e=this.y,n=this.z;this.y=Object(u.a)(t)*e+Object(u.d)(t)*n,this.z=Object(u.a)(t)*n-Object(u.d)(t)*e}},{key:"_rotateY",value:function(t){var e=this.x,n=this.z;this.x=Object(u.a)(t)*e-Object(u.d)(t)*n,this.z=Object(u.a)(t)*n+Object(u.d)(t)*e}},{key:"_rotateZ",value:function(t){var e=this.x,n=this.y;this.x=Object(u.a)(t)*e+Object(u.d)(t)*n,this.y=Object(u.a)(t)*n-Object(u.d)(t)*e}},{key:"scale",value:function(t){return this.x*=t[0],this.y*=t[1],this.z*=t[2],this}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return this.translate(e.map((function(t){return-t}))),this._rotateZ(t.alpha),this._rotateY(t.beta),this._rotateX(t.gamma),this.translate(e),this}},{key:"translate",value:function(t){return this.x+=t[0],this.y+=t[1],this.z+=t[2],this}},{key:"perspective",value:function(t,e,n){var a=this.x,r=this.y,i=this.z,s=Object(u.e)((Math.PI-t)/2),c=(e+n)/(2*e*n),o=2*e*n/(e-n);return this.x=s*a/(o*r),this.y=c-1/(o*r),this.z=s*i/(o*r),this}},{key:"centroid",get:function(){return{x:this.x,y:this.y,z:this.z}}}]),t}(),x=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(o.e)();Object(d.a)(this,t),this.points=e.map((function(t){return new y(t)})),this.generator=n}return Object(O.a)(t,[{key:"scale",value:function(t){return this.points=this.points.map((function(e){return e.scale(t)})),this}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return this.points=this.points.map((function(n){return n.rotate(t,e)})),this}},{key:"translate",value:function(t){return this.points=this.points.map((function(e){return e.translate(t)})),this}},{key:"perspective",value:function(t,e,n){return this.points=this.points.map((function(a){return a.perspective(t,e,n)})),this}},{key:"centroid",get:function(){return{x:Object(u.b)(this.points.map((function(t){return t.x}))),y:Object(u.b)(this.points.map((function(t){return t.y}))),z:Object(u.b)(this.points.map((function(t){return t.z})))}}},{key:"area",get:function(){for(var t=[].concat(Object(m.a)(this.points),[this.points[0]]),e=0,n=0;n<t.length-1;n++){var a=t[n],r=t[n+1];e+=(r.x-a.x)*(r.z+a.z)}return e}},{key:"data",get:function(){return this.generator(this.points.map((function(t){return[t.x,t.z]})))}},{key:"colorValue",get:function(){return Object(u.b)(this.points.map((function(t){return t.coordinates[2]})))}}]),t}(),v=function(){function t(e){Object(d.a)(this,t),this.df=e,this.polygons=[];for(var n=function(t,n){return[e.columns[n],e.index[t],e.values[t][n]]},a=function(t,e){return[n(t,e),n(t,e+1),n(t+1,e+1),n(t+1,e)]},r=0;r<e.index.length-1;r++)for(var i=0;i<e.columns.length-1;i++)this.polygons.push(new x(a(r,i)))}return Object(O.a)(t,[{key:"scale",value:function(t){return this.polygons=this.polygons.map((function(e){return e.scale(t)})),this}},{key:"rotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return this.polygons=this.polygons.map((function(n){return n.rotate(t,e)})),this}},{key:"translate",value:function(t){return this.polygons=this.polygons.map((function(e){return e.translate(t)})),this}},{key:"perspective",value:function(t,e,n){return this.polygons=this.polygons.map((function(a){return a.perspective(t,e,n)})),this}},{key:"centroid",get:function(){return{x:Object(u.b)(this.polygons.map((function(t){return t.centroid.x}))),y:Object(u.b)(this.polygons.map((function(t){return t.centroid.y}))),z:Object(u.b)(this.polygons.map((function(t){return t.centroid.z})))}}},{key:"paths",get:function(){return this.polygons.sort(j)}}]),t}(),g=n(1),k=function(t){var e=t.df,n=t.angles,r=t.colorScale,i=new v(e).rotate(n).translate([0,-10,0]).perspective(Math.PI/8,1,200).scale([500,500,500]);return Object(a.useEffect)((function(){return Object(o.h)(".marks").data(i.paths)})),i.paths.map((function(t,e){return Object(g.jsx)("path",{className:"three marks",d:t.data,fill:t.area>0?Object(o.a)(r(t.colorValue)).darker():r(t.colorValue)},e)}))},w=n(3),z=function(t,e){return t.alpha<Math.PI/2?[-1.3,-1.3,e]:t.alpha<Math.PI?[1.3,-1.3,e]:t.alpha<3*Math.PI/2?[1.3,1.3,e]:[-1.3,1.3,e]},I=function(t){var e,n=t.df,r=t.trf,i=t.angles,s="#E5E2E0",o="white",u="1px",h=[],l=i.alpha>Math.PI?-1.075:1.075,f=r(new x([[l,1,1],[l,1,-1],[l,-1,-1],[l,-1,1]])),p=[],j=Object(w.a)(n.index.entries());try{for(j.s();!(e=j.n()).done;){var d=Object(c.a)(e.value,2),O=d[0],m=d[1];O%2||p.push(r(new x([[l,m,1],[l,m,-1]])))}}catch(J){j.e(J)}finally{j.f()}var v,k=i.alpha>1.5*Math.PI||i.alpha<.5*Math.PI?-1.075:1.075,I=r(new x([[1,k,1],[1,k,-1],[-1,k,-1],[-1,k,1]])),M=[],P=Object(w.a)(n.columns.entries());try{for(P.s();!(v=P.n()).done;){var E=Object(c.a)(v.value,2),N=E[0],_=E[1];N%2||M.push(r(new x([[_,k,1],[_,k,-1]])))}}catch(J){P.e(J)}finally{P.f()}var S,F=Object(c.a)(n.domain,2),W=F[0],L=F[1],q=b(W,L,5),A=[],R=Object(w.a)(b(1,-1,5).entries());try{for(R.s();!(S=R.n()).done;){var V=Object(c.a)(S.value,2),B=V[0],D=V[1];A.push(r(new x([[-1,k,D],[1,k,D]]))),A.push(r(new x([[l,-1,D],[l,1,D]]))),h.push({text:q[B].toFixed(2),position:r(new y(z(i,D)))})}}catch(J){R.e(J)}finally{R.f()}return Object(a.useEffect)((function(){})),Object(g.jsxs)("g",{children:[Object(g.jsx)("path",{className:"xWall base",d:f.data,fill:s}),p.map((function(t){return Object(g.jsx)("path",{className:"",d:t.data,stroke:o,strokeWidth:u,strokeLinecap:"square"})})),Object(g.jsx)("path",{className:"yWall base",d:I.data,fill:s}),M.map((function(t){return Object(g.jsx)("path",{className:"",d:t.data,stroke:o,strokeWidth:u,strokeLinecap:"square"})})),A.map((function(t){return Object(g.jsx)("path",{className:"",d:t.data,stroke:o,strokeWidth:u,strokeLinecap:"square"})})),h.map((function(t){var e=t.text,n=t.position;return Object(g.jsx)("text",{x:n.x,y:n.z+6,children:e,fontSize:"0.9rem",fill:"#635F5D",fontFamily:"Roboto, sans-serif"})}))]})},M=function(t){var e,n=t.df,r=t.trf,i=t.angles,s=r(new x([[1,1,1.075],[1,-1,1.075],[-1,-1,1.075],[-1,1,1.075]])),u=[],h=[],l=i.alpha<Math.PI?-1.25:1.25,f=Object(w.a)(n.index.entries());try{for(f.s();!(e=f.n()).done;){var p=Object(c.a)(e.value,2),b=p[0],j=p[1];b%2||(u.push(r(new x([[-1,j,1.075],[1,j,1.075]]))),h.push({text:n.labels.index[b],position:r(new y([l,j,1.1]))}))}}catch(I){f.e(I)}finally{f.f()}var d,O=i.alpha<1.5*Math.PI&&i.alpha>.5*Math.PI?-1.25:1.25,m=Object(w.a)(n.columns.entries());try{for(m.s();!(d=m.n()).done;){var v=Object(c.a)(d.value,2),k=v[0],z=v[1];k%2||(u.push(r(new x([[z,-1,1.075],[z,1,1.075]]))),h.push({text:n.labels.columns[k],position:r(new y([z,O,1.1]))}))}}catch(I){m.e(I)}finally{m.f()}return Object(a.useEffect)((function(){return Object(o.h)(".floor").selectAll(".base").data(s)})),Object(g.jsxs)("g",{children:[Object(g.jsx)("path",{className:"floor base",d:s.data,fill:"#E5E2E0"}),u.map((function(t){return Object(g.jsx)("path",{className:"floor grid",d:t.data,stroke:"white",strokeWidth:"1px",strokeLinecap:"square"})})),h.map((function(t){var e=t.text,n=t.position;return Object(g.jsx)("text",{className:"floor label",x:n.x-12,y:n.z+2,children:e.toFixed(2),fontSize:"0.9rem",fill:"#635F5D",fontFamily:"Roboto, sans-serif"})}))]})},P={alpha:7*Math.PI/4,beta:0,gamma:7*Math.PI/4},E=function(t){var e=t.df,n=t.width,r=t.height,i=Object(a.useState)(P),s=Object(c.a)(i,2),h=s[0],l=s[1],f=Object(a.useRef)({x:0,y:0}),p=function(t){f.current={x:t.x,y:t.y}},b=function(t){return l({alpha:Object(u.c)(h.alpha+(t.x-f.current.x)/300*Math.PI,2*Math.PI),beta:h.beta,gamma:Object(u.c)(h.gamma-(t.y-f.current.y)/300*Math.PI,2*Math.PI)})};Object(a.useEffect)((function(){var t=Object(o.c)().on("start",p).on("drag",b);Object(o.g)("svg").call(t),Object(o.h)(".three").sort(j)}));var d=Object(o.f)(o.d).domain([1,-1]),O=function(t){return t.rotate(h).translate([0,-10,0]).perspective(Math.PI/8,1,200).scale([500,500,500])};return Object(g.jsxs)("svg",{width:n,height:r,children:[Object(g.jsxs)("g",{transform:"translate(".concat(n/2,", ").concat(r/2,")"),children:[Object(g.jsx)(M,{df:e,trf:O,angles:h}),Object(g.jsx)(I,{df:e,trf:O,angles:h}),Object(g.jsx)(k,{df:e,angles:h,colorScale:d})]}),Object(g.jsxs)("text",{x:10,y:10,children:["Alpha: ",h.alpha]}),Object(g.jsxs)("text",{x:10,y:30,children:["Beta: ",h.beta]}),Object(g.jsxs)("text",{x:10,y:50,children:["Gamma: ",h.gamma]})]})},N=function(){var t=Object(a.useState)(null),e=Object(c.a)(t,2),n=e[0],r=e[1];return Object(a.useEffect)((function(){return Object(o.b)("https://raw.githubusercontent.com/kmatolcsy/options/master/2021-04-16/implied_vols_parametric_dfw.csv").then(f).then(p).then(r)}),[]),n?Object(g.jsx)("div",{children:Object(g.jsx)(E,{df:n,width:900,height:600})}):"Loading..."};s.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(N,{})}),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.92c97ce9.chunk.js.map